<!DOCTYPE html>

<html>
    <body>
        <button id="rockBtn">Rock</button>
        <button id="paperBtn">Paper</button>
        <button id="scissorsBtn">Scissors</button>
        <div id = "result"></div>
    </body>

    <script>
        const rockBtn = document.getElementById("rockBtn");
        const paperBtn = document.getElementById("paperBtn");
        const scissorsBtn = document.getElementById("scissorsBtn");
        let scorePlayer = 0;
        let scoreComputer = 0;
        const userInput = prompt("Best of?");
        const amount = parseInt(userInput);

        rockBtn.onclick = function() {
            const p = document.createElement("p")
            let playerSelection = "rock";
            let computerSelection = computerPlay();
            let outcome = playRound(playerSelection, computerSelection);
            scoreTracker(outcome);
            p.innerHTML = outcome;
            document.getElementById("result").appendChild(p);
            if (scorePlayer + scoreComputer === amount) {
                endGame();
            }
        };
        
        paperBtn.onclick = function() {
            const p = document.createElement("p")
            let playerSelection = "paper";
            let computerSelection = computerPlay();
            let outcome = playRound(playerSelection, computerSelection);
            scoreTracker(outcome);
            p.innerHTML = outcome;
            document.getElementById("result").appendChild(p);
            if (scorePlayer + scoreComputer === amount) {
                endGame();
            }
        };
        
        scissorsBtn.onclick = function() {
            const p = document.createElement("p")
            let playerSelection = "scissors";
            let computerSelection = computerPlay();
            let outcome = playRound(playerSelection, computerSelection);
            scoreTracker(outcome);
            p.innerHTML = outcome;
            document.getElementById("result").appendChild(p);
            if (scorePlayer + scoreComputer === amount) {
                endGame();
            }
        };

        function computerPlay() {
            const rand = Math.random();
            if(rand <0.34) {
                return "rock"
            } else if(rand <=0.67) {
                return "paper"
            } else {
                return "scissors"
            }
        }
        
        function playRound(playerSelection, computerSelection) {

            let player = playerSelection;
            let computer = computerSelection;

            if(player===computer) {
                return "It's a tie!"
            } 
            if(player==="rock") {
                if(computer==="paper") {
                    return "You Lose! Paper beats Rock!"
                } else {
                    return "You Win! Rock beats Scissors!"
                }
            }
            if(player==="paper") {
                if(computer==="rock") {
                    return "You Win! Paper beats Rock!"
                } else {
                    return "You Lose! Scissors beats Paper!"
                }
            }
            if(player==="scissors") {
                if(computer==="rock") {
                    return "You Lose! Rock Beats Scissors!"
                } else {
                    return "You Win! Scissors beats Paper!"
                }
            }
        }

        function scoreTracker(outcome) {
            if (outcome === "You Win! Rock beats Scissors!" || outcome === "You Win! Paper beats Rock!" || outcome === "You Win! Scissors beats Paper!") scorePlayer++;
            else if (outcome === "You Lose! Paper beats Rock!" || outcome === "You Lose! Scissors beats Paper!" || outcome === "You Lose! Rock Beats Scissors!") scoreComputer++;
        }

        function endGame() {
            const p = document.createElement("p")
            if(scorePlayer > scoreComputer) { 
                p.innerHTML = "Final Score: " + scorePlayer + " (user) " + " vs. " + scoreComputer + " (computer) // You're the winner!";
                document.getElementById("result").appendChild(p);
                rockBtn.remove();
                paperBtn.remove();
                scissorsBtn.remove();
            }
            else if (scoreComputer > scorePlayer) { 
                p.innerHTML = "Final Score: " + scorePlayer + " (user) " + " vs. " + scoreComputer + " (computer) // You lost!";
                document.getElementById("result").appendChild(p);
                rockBtn.remove();
                paperBtn.remove();
                scissorsBtn.remove();
            }
        }
    
    

        
        
        


    </script>

</html>

